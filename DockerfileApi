# platform 

# Base Image.
FROM node:lts AS base

# Update system image.
RUN apt update

# Install system image dependencies.
RUN apt install -y build-essential cmake build-essential cmake git stockfish

# copy all files to the container
COPY . /app

# set the working directory
WORKDIR /app

# install dependencies
RUN NODE_ENV=development npm install
RUN NODE_ENV=development npm run install:api

# build
RUN npm run build:api

# start the app
CMD ["npm", "run", "start:api"]
